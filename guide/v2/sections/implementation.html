<section class="implementation">
  <h2>نحوه پیاده‌سازی</h2>

  <!-- Pure JavaScript -->
  <div class="implementation-section" id="javascript">
    <h3>پیاده‌سازی با Pure JavaScript</h3>

    <div class="code-example">
      <h4>HTML:</h4>
      <div class="code-block">
        <pre><code>&lt;!DOCTYPE html&gt;
    &lt;html&gt;
    &lt;head&gt;
        &lt;link rel="stylesheet" href="https://sdk.armogroup.tech/makeup/v2/makeup.min.css"&gt;
        &lt;script src="https://sdk.armogroup.tech/makeup/v2/makeup.js"&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div id="armo-makeup-view"&gt;&lt;/div&gt;
        &lt;div id="controls"&gt;
            &lt;button onclick="changeType('lips')"&gt;رژ لب&lt;/button&gt;
            &lt;button onclick="changeType('eyeshadow')"&gt;سایه چشم&lt;/button&gt;
            &lt;button onclick="changeEyelinerStyle('normal')"&gt;خط چشم معمولی&lt;/button&gt;
            &lt;button onclick="changeEyelinerStyle('lashed')"&gt;خط چشم مژه‌دار&lt;/button&gt;
        &lt;/div&gt;
    &lt;/body&gt;
    &lt;/html&gt;</code></pre>
      </div>

      <h4>JavaScript:</h4>
      <div class="code-block">
        <pre><code>let makeupApp;
    
    document.addEventListener("DOMContentLoaded", () => {
        // تنظیم توکن
        window.Makeup.token = "YOUR_TOKEN_HERE";
    
        // ایجاد نمونه از SDK
        makeupApp = new window.Makeup({
            colors: [
                { code: "01", color: "#000000" },
                { code: "02", color: "#4B0082" }
            ],
            pattern: "normal",
            face: "lips",
            onReady: handleReady,
            onError: handleError
        });
    });
    
    function handleReady() {
        document.getElementById("loading").style.display = "none";
        document.getElementById("controls").style.display = "block";
    }
    
    function handleError(error) {
        console.error("SDK Error:", error);
        document.getElementById("error-message").textContent = error.message;
    }
    
    function changeType(type) {
        if (makeupApp.isFeatureEnabled(type)) {
            makeupApp.changeMakeupType(type);
        } else {
            alert("این ویژگی در دسترس نیست");
        }
    }
  
    function changeEyelinerStyle(style) {
        if (makeupApp.isFeatureEnabled("eyeliner")) {
            makeupApp.changeMakeupType("eyeliner");
            makeupApp.setMakeupPattern("eyeliner", style);
        } else {
            alert("ویژگی خط چشم در دسترس نیست");
        }
    }</code></pre>
      </div>
    </div>
  </div>

  <!-- React -->
  <div class="implementation-section" id="react">
    <h3>پیاده‌سازی در React</h3>

    <div class="code-example">
      <h4>نصب:</h4>
      <p>در فایل <code>public/index.html</code>:</p>
      <div class="code-block">
        <pre><code>&lt;link rel="stylesheet" href="https://sdk.armogroup.tech/makeup/v2/makeup.min.css"&gt;
    &lt;script src="https://sdk.armogroup.tech/makeup/v2/react-loader.min.js"&gt;&lt;/script&gt;</code></pre>
      </div>

      <h4>کامپوننت React:</h4>
      <div class="code-block">
        <pre><code>import { useEffect, useState } from 'react';
    
    function VirtualMakeup() {
        const [isReady, setIsReady] = useState(false);
        const [error, setError] = useState(null);
    
        useEffect(() => {
            if (typeof window !== 'undefined' && window.Makeup) {
                window.Makeup.token = "YOUR_TOKEN_HERE";
                
                const makeup = new window.Makeup({
                    colors: [
                        { code: "01", color: "#000000" },
                        { code: "02", color: "#4B0082" }
                    ],
                    pattern: "normal",
                    face: "lips",
                    onReady: () => setIsReady(true),
                    onError: (err) => setError(err.message)
                });
    
                return () => {
                    // Cleanup
                    if (makeup) {
                        // SDK cleanup code here
                    }
                };
            }
        }, []);
    
        if (error) {
            return &lt;div className="error-message"&gt;{error}&lt;/div&gt;;
        }
    
        return (
            &lt;div className="makeup-container"&gt;
                {!isReady && &lt;div className="loading"&gt;Loading...&lt;/div&gt;}
                &lt;div id="armo-makeup-view" className={isReady ? 'ready' : 'hidden'}&gt;&lt;/div&gt;
                {isReady && (
                    &lt;div className="controls"&gt;
                        &lt;button onClick={() => window.makeupApp.changeMakeupType('lips')}&gt;
                            رژ لب
                        &lt;/button&gt;
                        &lt;button onClick={() => window.makeupApp.changeMakeupType('eyeshadow')}&gt;
                            سایه چشم
                        &lt;/button&gt;
                        &lt;button onClick={() => {
                            window.makeupApp.changeMakeupType('eyeliner');
                            window.makeupApp.setMakeupPattern('eyeliner', 'normal');
                        }}&gt;
                            خط چشم معمولی
                        &lt;/button&gt;
                        &lt;button onClick={() => {
                            window.makeupApp.changeMakeupType('eyeliner');
                            window.makeupApp.setMakeupPattern('eyeliner', 'lashed');
                        }}&gt;
                            خط چشم مژه‌دار
                        &lt;/button&gt;
                    &lt;/div&gt;
                )}
            &lt;/div&gt;
        );
    }</code></pre>
      </div>
    </div>
  </div>

  <!-- React Native -->
  <div class="implementation-section" id="react-native">
    <h3>پیاده‌سازی در React Native</h3>

    <div class="code-example">
      <h4>نصب پیش‌نیازها:</h4>
      <div class="code-block">
        <pre><code>npm install react-native-webview</code></pre>
      </div>

      <h4>کامپوننت React Native:</h4>
      <div class="code-block">
        <pre><code>import React, { useState } from 'react';
    import { View, Text, ActivityIndicator } from 'react-native';
    import { WebView } from 'react-native-webview';
    
    const VirtualMakeup = () => {
        const [isReady, setIsReady] = useState(false);
        const [error, setError] = useState(null);
    
        const htmlContent = `
            &lt;!DOCTYPE html&gt;
            &lt;html&gt;
                &lt;head&gt;
                    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
                    &lt;link rel="stylesheet" href="https://sdk.armogroup.tech/makeup/v2/makeup.min.css"&gt;
                    &lt;script src="https://sdk.armogroup.tech/makeup/v2/makeup.js"&gt;&lt;/script&gt;
                &lt;/head&gt;
                &lt;body&gt;
                    &lt;div id="armo-makeup-view"&gt;&lt;/div&gt;
                    &lt;div id="controls"&gt;
                        &lt;button id="lips-btn"&gt;رژ لب&lt;/button&gt;
                        &lt;button id="eyeshadow-btn"&gt;سایه چشم&lt;/button&gt;
                        &lt;button id="eyeliner-normal"&gt;خط چشم معمولی&lt;/button&gt;
                        &lt;button id="eyeliner-lashed"&gt;خط چشم مژه‌دار&lt;/button&gt;
                    &lt;/div&gt;
                    &lt;script&gt;
                        window.Makeup.token = "YOUR_TOKEN_HERE";
                        const makeup = new window.Makeup({
                            colors: [
                                { code: "01", color: "#000000" }
                            ],
                            pattern: "normal",
                            face: "lips",
                            onReady: () => {
                                window.ReactNativeWebView.postMessage(JSON.stringify({
                                    type: 'ready'
                                }));
                            },
                            onError: (error) => {
                                window.ReactNativeWebView.postMessage(JSON.stringify({
                                    type: 'error',
                                    message: error.message
                                }));
                            }
                        });
                        
                        document.getElementById('lips-btn').addEventListener('click', () => {
                            makeup.changeMakeupType('lips');
                        });
                        document.getElementById('eyeshadow-btn').addEventListener('click', () => {
                            makeup.changeMakeupType('eyeshadow');
                        });
                        document.getElementById('eyeliner-normal').addEventListener('click', () => {
                            makeup.changeMakeupType('eyeliner');
                            makeup.setMakeupPattern('eyeliner', 'normal');
                            window.ReactNativeWebView.postMessage(JSON.stringify({
                                type: 'styleChanged',
                                makeup: 'eyeliner',
                                pattern: 'normal'
                            }));
                        });
                        document.getElementById('eyeliner-lashed').addEventListener('click', () => {
                            makeup.changeMakeupType('eyeliner');
                            makeup.setMakeupPattern('eyeliner', 'lashed');
                            window.ReactNativeWebView.postMessage(JSON.stringify({
                                type: 'styleChanged',
                                makeup: 'eyeliner',
                                pattern: 'lashed'
                            }));
                        });
                    &lt;/script&gt;
                &lt;/body&gt;
            &lt;/html&gt;
        `;
    
        const handleMessage = (event) => {
            const data = JSON.parse(event.nativeEvent.data);
            if (data.type === 'ready') {
                setIsReady(true);
            } else if (data.type === 'error') {
                setError(data.message);
            } else if (data.type === 'styleChanged') {
                console.log(`Style changed: ${data.makeup} with pattern ${data.pattern}`);
            }
        };
    
        if (error) {
            return (
                &lt;View style={styles.errorContainer}&gt;
                    &lt;Text style={styles.errorText}&gt;{error}&lt;/Text&gt;
                &lt;/View&gt;
            );
        }
    
        return (
            &lt;View style={styles.container}&gt;
                {!isReady && (
                    &lt;ActivityIndicator size="large" color="#0000ff" /&gt;
                )}
                &lt;WebView
                    source={{ html: htmlContent }}
                    onMessage={handleMessage}
                    style={styles.webview}
                    allowsInlineMediaPlayback
                    mediaPlaybackRequiresUserAction={false}
                /&gt;
            &lt;/View&gt;
        );
    };</code></pre>
      </div>
    </div>
  </div>
</section>
